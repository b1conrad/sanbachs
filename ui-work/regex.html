<html>
<head>
<title>Registration experiment</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  var leftRadius = function(nodeId) {
    var theNode = $('#'+nodeId);
    return Math.floor(
             (parseFloat(theNode.css('border-left'))
             +parseFloat(theNode.css('padding-left'))
             +parseFloat(theNode.css('width'))
             +parseFloat(theNode.css('padding-right'))
             +parseFloat(theNode.css('border-right'))
             )/2);
  }
  var topRadius = function(nodeId) {
    var theNode = $('#'+nodeId);
    return Math.floor(
             (parseFloat(theNode.css('border-top'))
             +parseFloat(theNode.css('padding-top'))
             +parseFloat(theNode.css('height'))
             +parseFloat(theNode.css('padding-bottom'))
             +parseFloat(theNode.css('border-bottom'))
             )/2);
  }
  var updateLines = function(nodeId,theLeft,theTop) {
    var lR = leftRadius(nodeId);
    var tR = topRadius(nodeId);
    $('.'+nodeId+'-origin').attr({x1:theLeft+lR+'px',y1:theTop+tR+'px'});
    $('.'+nodeId+'-target').attr({x2:theLeft+lR+'px',y2:theTop+tR+'px'});
  }
  var updateEdges = function(nodeId) {
    var theLeft = parseFloat($('#'+nodeId).css('left'));
    var theTop = parseFloat($('#'+nodeId).css('top'));
    updateLines(nodeId,theLeft,theTop);
  }
  var dragmove = function(event,ui) {
    var nodeId = ui.helper[0].getAttribute("id");
    updateLines(nodeId,ui.position.left,ui.position.top);
  }
  $('div.pico').draggable({ containment: "parent",
                            drag: dragmove })
               .click(function(){alert(this)});;
  $('svg line').click(function(){alert(this)});
  $('div.pico ul li.primary')
    .click(about_primary_pico);
  updateEdges('p1');
  updateEdges('p2');
  updateEdges('p3');
  updateEdges('p4');
  updateEdges('p5');
  updateEdges('p6');
  updateEdges('p7');
  updateEdges('p8');
});
function about_primary_pico(ev) {
  window.location = "http://kre.github.io/devtools/index.html#about";
  ev.stopPropagation();
}
</script>
<style type="text/css">
div.pico {
  opacity: 1.0;
  position: absolute;
  width: 100px;
  height: 100px;
  border: 1px solid black;
  border-radius: 25px;
  padding: 10px;
  z-index: 1000;
}
div.pico ul {
  margin: 0px;
  padding: 0 0 0 20px;
  font-size: 70%;
}
div.pico ul li.primary {
  cursor: pointer;
}
svg {
  width: 100%;
  height: 100%;
  display: block;
}
svg line {
  stroke: #000;
  stroke-width: 5px;
}
div p {
  display: inline-block;
  position: absolute;
  width: 250px;
  font-size: 120%;
  padding-left: 20px;
}
</style>
</head>
<body>
<a href="https://picolabs.io"><img src="logo.png" alt="logo"></a>
<div style="position:relative">
<p style="">
Registration experiment has a Pico for each
section and one for each registering student.
</p>
<div class="pico" id="p1" style="width:80px;left:800px;top:10px;background-color:lightskyblue">
Owner Pico
<ul>
<li class="primary">About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p2" style="width:120px;left:450px;top:150px;background-color:aquamarine">
Registration Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p3" style="width:160px;left:600px;top:300px;background-color:aquamarine">
Student Collection Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p4" style="width:160px;left:250;top:300px;background-color:aquamarine">
Section Collection Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p5" style="width:150px;left:150px;top:500px;background-color:hotpink">
Section CS462-1 Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p6" style="width:150px;left:350px;top:500px;background-color:hotpink">
Section CS462-2 Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p7" style="left:500px;top:500px;background-color:lightsteelblue">
Student A Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<div class="pico" id="p8" style="left:700px;top:500px;background-color:lightsteelblue">
Student B Pico
<ul>
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
</div>
<svg>
  <line class="p1-origin p2-target"></line>
  <line class="p2-origin p3-target"></line>
  <line class="p2-origin p4-target"></line>
  <line class="p4-origin p5-target"></line>
  <line class="p4-origin p6-target"></line>
  <line class="p3-origin p7-target"></line>
  <line class="p3-origin p8-target"></line>
</svg>
</div>
</body>
</html>
